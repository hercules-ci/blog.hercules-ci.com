---
layout:     post
title:      Agent 0.5.0 with More Terraform and Less Configuration
date:       2019-10-04
summary:    A new agent release simplifying the binary cache configuration and introducing new terraform deployment method.
image:      TBD
author:     roberth
tags:       hercules-ci
---


title: Agent 0.5.0 with More Terraform and Less Configuration
---

Earlier this week, we've released [agent version 0.5.0](https://github.com/hercules-ci/hercules-ci-agent/releases/tag/hercules-ci-agent-0.5.0). The main theme for the release is ease of installation.

Running an agent should be as simple as possible, so

 - we've made simplifications to the binary cache configuration and
 - we now provide [terraform modules and an example](https://github.com/hercules-ci/terraform-hercules-ci#readme)

So if you haven't deployed an agent yet, [now is the time!](https://docs.hercules-ci.com/hercules-ci/getting-started/)

If you have and you're using the module (NixOS, NixOps, nix-darwin) the update is entirely self-explanatory.

### Trusted-user

The agent now relies on being a `trusted-user` to the Nix daemon. Although it initially felt like a security regression, it is actually not. The agent does not allow projects to execute scary Nix store operations anyway. In fact it may improve security, because it simplifies secrets handling.

The security model for the agent is simple at this point: only build refs from the actual repo. This way, third-party contributors can not run arbitrary code on your agent system; only contributors with write access to the repo can.

So relying on `trusted-user` does not deteriorate security, but does make configuration easier and buys the agent more flexibility for some future features.

Talking about trust, we'll share some details about securely doing CI for Open Source with Bors soon!
